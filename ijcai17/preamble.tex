%Preamble File for Tutorial

\usepackage{times}
\usepackage{graphicx}
\graphicspath{{../../}{figures/}}
%Theorems and such

%\usepackage{amsthm}

\newtheorem{theorem}{Theorem}
%\newtheorem{observation}{Observation}
\newtheorem{proposition}{Proposition}
\newtheorem{definition}{Definition}

%\usepackage{proceed2e}
%\usepackage{ltexpprt}
% defines theorem environments etc.


%\newtheorem{theorem}{Theorem}[section]
\newtheorem{observation}{Observation}[section]
\newtheorem{hypo}{Hypotheses}[section]
%\newtheorem{proposition}{Proposition}[section]
%\newtheorem{definition}{Definition}[section]

%%%%%%%%%%%%%%%%%%
% Packages
%%%%%%%%%%%%%%%%%%

\usepackage[ruled,vlined]{algorithm2e}
\usepackage{algorithmic}
%\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{url}
\usepackage{subfigure}
\usepackage{epstopdf}
%\setcounter{MaxMatrixCols}{30}
\usepackage{multirow}
\usepackage{subfigure}
\usepackage{ifthen}
\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator*{\argmin}{argmin}
\DeclareMathOperator{\NP}{\mathbf{\mathrm{NP}}}

%%%%%%%%%%%%%%%%%%%%
% font styles
%%%%%%%%%%%%%%%%%%

\def\defterm#1{\textbf{#1}}
%\def\set#1{\mathbf{#1}}
\def\set#1{\bs{#1}}
\def\bs#1{\boldsymbol{#1}}
\def\ground#1{\overline{#1}}


%%%%%%%
% values
%%%%%%%

\newcommand{\male}{M}
%%%%%%%%
% other systems

\newcommand{\foil}{\textsc{FOIL}}
%%%%%%%%%%%%%%%%%%%
% relational structures
%%%%%%%%%%%%%%%%%%

\newcommand{\structure}{w}
\newcommand{\individuals}{\mathcal{I}}
\newcommand{\functors}{\mathcal{F}}\newcommand{\values}{\mathcal{V}}
\newcommand{\samplesize}{N}
\newcommand{\psize}[2]{N\left[#1;#2\right]}
%usage{\psize{population}{dstructure}
\newcommand{\varsize}[2]{\psize{#1}{#2}}
%usage \varsize{pvariable}{dstructure}
%%%%%%%%%
% special functors


% for population variables
\newcommand{\Avariable}{\mathbb{A}}
\newcommand{\Bvariable}{\mathbb{B}}
\newcommand{\Cvariable}{\mathbb{C}}
\newcommand{\Uvariable}{\mathbb{U}}

%for individual constants
\newcommand{\aconstant}{a}
\newcommand{\bconstant}{b}
\newcommand{\cconstant}{c}

% for classes, sorts, types

\def\varclass#1#2{#1_{#2}}
%usage \varclass{\individuals}{\Avariable}


% for functors

\newcommand{\functor}{f}
\newcommand{\Ppredicate}{P}
\newcommand{\Rpredicate}{R}
\newcommand{\class}{\it{Class}}
% for functors representing classes
\newcommand{\indclass}{\individuals}
\newcommand{\relationship}{\it{Relation}}
% for functors representing classes

% various constants
\newcommand{\true}{\mathrm{T}}
\newcommand{\false}{\mathrm{F}}
\newcommand{\na}{\it{na}}
\newcommand{\normalconstant}{Z} % the normalization constant

%formulas and such
%first-order variables
\newcommand{\Xvariable}{X}
\newcommand{\Yvariable}{Y}
\newcommand{\numvalues}[1]{r_{#1}}
% usage \numvalues{i}
%terms and compounds
\newcommand{\term}{\tau}
\def\fterm#1#2{#1(#2)}
%usage \term{\functor}{\terms}
\newcommand{\literal}{l}
\newcommand{\conjunction}{C}
\newcommand{\formula}{\phi}
\newcommand{\numformulas}{m}

%%%%%%%%%%%%%%%%%%
% Groundings
%%%%%%%%%%%%%%
\def\FG#1{#1^{\ast}}
\newcommand{\grounding}{\gamma}
\def\groundnode#1{\gamma_{#1}}
\def\replace#1#2{#1\backslash#2}
% \replace{population variable \textbackslash constant
\def\ground#1#2{\FG{#1}_{#2}}
%usage: \groundobject{object}{grounding}
\def\instantiate#1#2{#1_{#2}}
\def\groundall#1{\Gamma_{#1}}
% \groundall{Gamma}{set of pvariables}
%the substitution space of a set of variables

\def\resultset#1#2{\mathcal{R}_{#1}(#2)}
%usage \resultset{structure}{formula}

% Annotations marking degree of grounding
\newcommand{\UG}[2][0.0ex]{#2^{-}\hspace{#1}}
\newcommand{\PG}[2][0.0ex]{#2^{\prime}\hspace{#1}}
%\newcommand{\FG}[2][0.0ex]{#2^{*}\hspace{#1}}


%%%%%%%%%%%%%%%%
% Counts and probabilities
%%%%%%%%%%%%%%%%

\newcommand{\dset}{D}
\newcommand{\dstructure}{\mathcal{D}}
% observed substructure
\def\dminus#1#2{\FG{#1}_{-#2}}
%usage: \dminus{dstructure}{ground atom}
%\def\dvalues#1#2#3{#1_{#2}(#3)}
%%observed values in D. usage: dvalues{values}{variables}{Database}
\def\dvalues#1#2#3{#1^{#2}_{#3}}
%observed values in D. usage: dvalues{varvalue}{grounding}{Database}
\def\dprob#1#2{P_{#1}(#2)}

%%%%%%%%%
% deprecate these
\def\dlog#1#2{L_{#1}(#2)}
% usage: dprob{structure}{formula}
\def\dlogcount#1#2#3{L^{#1}_{#2}(#3)}
% usage: L{model}{node index}{database}
\def\dlogfreq#1#2#3{\nscore{L}^{#1}_{#2}(#3)}
% usage: L{model}{node index}{database}
\def\aiclocal#1#2#3{\it{AIC}^{#1}_{#2}(#3)}
% usage: AIC{model}{node index}{database}
\def\aicfreq#1#2#3{\nscore{\it{AIC}}^{#1}_{#2}(#3)}
% usage: AIC{model}{node index}{database}
\def\biclocal#1#2#3{\it{BIC}^{#1}_{#2}(#3)}
% usage: BIC{model}{node index}{database}


\def\spenalty#1#2#3#4{f^{#1}(\numpars{#3}{#2},#4)}
%usage \spenalty{scorename}{node index}{graph}{countvector}

\def\numpars#1#2{\#\it{pars}_{#2}(#1)}
% usage \numpars{\BN}{i}

\def\Score#1#2#3{#1(#2,#3)}
%usage \Score{scorename}{\BN}{\D}
\def\score#1#2#3#4{#1_{#2}(#3,#4)}
%\def\score#1#2#3#4{#1_{#3}(#2,#4)}
% usage: \score{scorename}{node index}{graph}{database}
% usage: \score{scorename}{node index}{parents}{database}
%\def\gain#1#2#3#4#5{\improve{#1}_{#4}(#2,#3',#5)}
\def\Gain#1#2#3#4{#1(#2,#3,#4)}
%usage \Gain{gainname}{\BN}{\BN'}{dstructure}
\def\gain#1#2#3#4{#1_{#2}(#3,#3^{+},#4)}
% usage: \gain{scorename}{node index}{model}{database}
\newcommand\parloss[2]{\improve{\it{pars}}({\node_{i},{\Parents{#1}{#2},\node_{+}}})}
%usage: parloss{node index}{model}
%score names


\newcommand{\loglikelihood}{LL}
\newcommand{\aic}{AIC}
\newcommand{\bic}{BIC}
\newcommand{\bdeu}{BDeu}
\newcommand{\rescale}{\loglikelihood_{\it{scale}}}

\def\cscore#1{#1}
%count score
\def\nscore#1{\overline{#1}}
%\def\nscore#1{#1}
% normalized score
\def\ncscore#1{\widetilde{#1}}
%\def\gain#1{\overline{#1}}
\def\improve#1{\Delta#1}
\def\logimprove#1#2#3#4{\improve{L}^{#1,#2}_{#3}(#4)}
%usage \logimprove{BN1}{BN2}{i}{dstructure}
\def\flogimprove#1#2#3#4{\improve{\nscore{L}}^{#1,#2}_{#3}(#4)}
%usage \logimprove{BN1}{BN2}{i}{dstructure}
\def\aicimprove#1#2#3#4{\improve{\nscore{\it{AIC}}}^{#1,#2}_{#3}(#4)}
\def\bicimprove#1#2#3#4{\improve{\nscore{\it{BIC}}}^{#1,#2}_{#3}(#4)}

\def\rlog#1#2{\Relevant{L}_{#1}(#2)}
\def\bprob#1#2#3{#1_{#2}(#3)}
% usage: bprob{P}{BN}{assignment}
\def\iprob#1{\FG{P}(#1)}
% usage iprob{ground formula/term}
\newcommand{\probworlds}{\mu}
%distribution over structures


%%%%%%%%%%%%
%DB counts
%%%%%%%%%

\newcommand{\Cvar}{\mathrm{n}}
\newcommand{\Fvar}{\mathrm{p}}
\newcommand{\Relevant}[1]{#1^{\mathrm{r}}}
\newcommand{\relevant}[1]{\it{R}_{#1}}
%usage \relevant{index}

\newcommand{\Count}[2]{\Cvar\left[#1;#2\right]}
%e.g.n[formula;database]
\newcommand{\Fcount}[3]{\Cvar^{#1}_{#2}(#3)}
%usage \fcount{\bn}{ijk}{dstructure}
\newcommand{\Fbcount}[3]{\set{\Cvar}^{#1}_{#2}(#3)}
\newcommand{\Fpcount}[3]{\overline{\set{\Cvar}}^{#1}_{#2}(#3)}
\newcommand{\Rcount}[3]{\Relevant{\Cvar}\left[{#1};#2\right]}
%usage \Rcount{formula}{dstructure}
\newcommand{\Frcount}[3]{\Relevant{\Cvar}_{#1}(#2)}
%usage \Rcount{ijk}{dstructure}
\newcommand{\countvec}[3]{\set{\Cvar}^{#1}_{#2}(#3)}
%usage \countvec{countvector symbol}{graph}{data}


\newcommand{\Freq}[2]{\Fvar\left[#1;#2\right]}
%e.g.n[formula;database]
\newcommand{\Ffreq}[2]{\Fvar_{#1}(#2)}
%usage \ffreq{ijk}{dstructure}
\newcommand{\Rfreq}[2]{\Relevant{\Fvar}\left[{#1};#2\right]}
%usage \Rfreq{formula}{dstructure}
\newcommand{\Frfreq}[2]{\Relevant{\Fvar}_{#1}(#2)}
%usage \Rfreq{ijk}{partial grounding}{dstructure}


%\newcommand{\Freq}[2]{\Fvar\left[#1;#2\right]}
%%e.g.n[formula;database]
%\newcommand{\Rfreq}[2]{\Relevant{\Fvar}\left[#1;#2\right]}
%\newcommand{\Ffreq}[2]{\Fvar_{#1}(#2)}
%%usage \fcount{ijk}{dstructure}
%\newcommand{\Frfreq}[2]{\Relevant{\Fvar}_{#1}(#2)}

%


%\newcommand{\Count}[2]{#1(#2)}
%%count of database
%%usage \bncount{\Cvar_{ijk}}{dstructure}
%\newcommand{\CountC}[2]{\Cvar_{ijk}\left[#1;#2\right]} %count in database satisfying grounding

%\newcommand{\drcount}[1]{\Relevant{\Cvar}_{ijk}\left[#1\right]}
%%count of database
%\newcommand{\drcountC}[2]{\Relevant{\Cvar}_{ijk}\left[#1;#2\right]} %count in database satisfying grounding
%
%\newcommand{\dfreq}[2]{#1(#2)}
%%frequency database
%\newcommand{\dfreqC}[2]{\Fvar_{ijk}\left[#1;#2\right]} %frequency in database satisfying grounding
%\newcommand{\drfreq}[1]{\Relevant{\Fvar}_{ijk}\left[#1\right]}
%%frequency in database
%\newcommand{\drfreqC}[2]{\Relevant{\Fvar}_{ijk}\left[#1;#2\right]} %frequency in database satisfying grounding



%%%%%%%%%%%%%%%%%%%%%%
% Bayesian networks
%%%%%%%%%%%%%%%%



% Functions for graph structure
\newcommand{\BN}{B}
\newcommand{\mln}{M}
\newcommand{\node}{\Xvariable}
\newcommand{\graph}{G}
\newcommand{\MB}[1]{\mathrm{MB}(#1)}
\newcommand{\bnparents}{\mathrm{Pa}}
\newcommand{\Parents}[2]{\mathrm{Pa}_{#1}^{#2}}
%usage \Parents{\nodeindex}{\model}
\newcommand{\pavalue}[2]{\mathbf{pa}_{#1}^{#2}}
%usage \pavalue{i}
\newcommand{\numparents}[2]{q_{#1}^{#2}}
% usage \numparents{i}{\graph}
\def\numpars#1#2{\#\it{pars}_{#2}^{#1}}
% usage \numpars{\BN}{i}
\newcommand{\Ch}[1]{\mathrm{Ch}(#1)}
\newcommand{\nodevalue}{\it{v}}
\newcommand{\xvalue}{x}
\newcommand{\yvalue}{y}
%\newcommand{\parent}{\mathit{pa}}


\newcommand{\parameter}{\theta}
% Key functions for parameters
\newcommand{\w}{w}
\newcommand{\mprob}[2]{#1(#2)}
% usage \mprob{P}{node_{i = value k}}
%marginal probability
\newcommand{\cprob}[3]{#1(#2|#3)}
%usage \cprob{P}{x}{y}
\newcommand{\estcprob}[1]{\widehat{\parameter}_{ijk}(#1)}
%usage \estcprob(\dstructure)


\newcommand{\family}[2]{#1^{#2}}
%usage: \family{\node}{i}
\newcommand{\familyvalue}[1]{\xvalue_{#1}}
%usage: \familyvalue{ijk}
\newcommand{\familyf}[2]{(\node_{#1},\Parents{\node_{#1}})=\xvalue_{#2}}
%% usage: \familyf{i}{ijk}

%%%%%%%%%%%%%%
%
% conditional probabilities in log-linear model

\newcommand{\Gpvar}{\FG{P}}
\newcommand{\Gprob}[2]{\Gpvar(#1 | #2)}






