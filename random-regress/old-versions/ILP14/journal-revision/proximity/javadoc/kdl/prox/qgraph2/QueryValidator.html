<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_07) on Mon Nov 19 14:52:14 EST 2007 -->
<TITLE>
QueryValidator (Proximity API)
</TITLE>

<META NAME="keywords" CONTENT="kdl.prox.qgraph2.QueryValidator class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="QueryValidator (Proximity API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/QueryValidator.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../kdl/prox/qgraph2/QueryIterHandlerEmptyAdapter.html" title="class in kdl.prox.qgraph2"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../kdl/prox/qgraph2/QueryXMLUtil.html" title="class in kdl.prox.qgraph2"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?kdl/prox/qgraph2/QueryValidator.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="QueryValidator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#methods_inherited_from_class_java.lang.Object">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;METHOD</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
kdl.prox.qgraph2</FONT>
<BR>
Class QueryValidator</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by "><B>kdl.prox.qgraph2.QueryValidator</B>
</PRE>
<HR>
<DL>
<DT><PRE>public class <B>QueryValidator</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
A helper class used by QueryGraph2CompOp to validate newly-created QueryS.
 The constructor does the checking.
 <p/>
 Our approach to saving validation errors is to store each invalid aspect as
 a string in a List, then throw a ValidationError if there are any strings.
 In other words, we don't stop processing at the first exception.
 <p/>
 Following are the specific things checked, and where they are checked. They
 are referred to by name (e.g., "b.4.a") in the methods that check them.
 <p/>
 <p/>
 a. constraints not enforced by the DTD:
 <p/>
 1. <!ELEMENT directed (#PCDATA)>
 <!-- possible values: "true", "false" -->
 ... checked by QGEdge()
 <p/>
 2. <!ELEMENT numeric-annotation (min, max?)>
 <!-- min and max are whole numbers, and min <= max. valid combinations: [i..j], [i..], or [i] -->
 ... checked by Annotation()
 <p/>
 3. <!ELEMENT operator (#PCDATA)>
 <!-- possible values: "eq", "ge", "le", , "ne", "exists" -->
 ... checked by checkTestEle()
 <p/>
 4. <!ELEMENT test (operator, %operand;, (%operand;)?)>
 <!-- test operands should be consistent: two items, or an attribute-name and a value -->
 <!-- operator "exists" requires a single operand -->
 ... checked by checkTestEle()
 <p/>
 5. <!ELEMENT constraint %dnf;>
 <!-- constraints should only test between pairs of items (two vertices or two edges)
 We use DNF in the DTD for consistency, but in reality only <AND>s can be used in constraints
 as binary operators (a single TEST elements is OK, but if there are two or more, they have to
 be combined with <AND>)
 Also, no constrainsts involving two annotated edges are allowed.
 -->
 ... checked by checkTestEleConst() and checkDNFEle
 <p/>
 6. <!ELEMENT condition %dnf;>
 <!-- conditions should only compare attribute names and values -->
 ... checked by checkTestEleCond()
 <p/>
 <p/>
 b. from Hannah's well-formed.txt:
 <p/>
 1. Query must remain connected (without negated elements). This can be
 tested by making a copy, removing from it all negated elements
 (vertices, edges, and subqueries), and testing whether the copy is
 connected.
 ... checked by checkNonNegatedConnComps()
 <p/>
 2. Every query must have at least one vertex.
 ... checked by checkAtLeastOneVertex()
 <p/>
 3. Every edge must have vertices at both ends.
 ... checked by checkEdge()
 <p/>
 4. The inner structure of a subquery should be a well-formed query by
 itself. Two corollaries:
 a. subquery must remain connected (without boundary edges)
 ... checked by checkNonNegatedConnComps()
 b. single edge is not a legal subquery
 ... checked by checkAtLeastOneVertex()
 <p/>
 5. No edge or constraint between two annotated elements:
 a. at most one of any two adjacent vertices can be annotated
 ... checked by checkEdge()
 b. no constraint between two vertices (or edges) that are both annotated
 ... checked by checkConstEleChild()
 c. no numeric annotation allowed on a vertex adjacent to an annotated subquery
 ... checked by checkEdge()
 d. no edge can connect one annotated subquery to another
 ... checked by checkEdge()
 <p/>
 6. An edge incident to an annotated element must itself be annotated (default [1..]).
 a. edge incident to an annotated vertex must be annotated
 ... checked by checkEdge()
 b. boundary edge of an annotated subquery must be annotated
 ... checked by checkEdge()
 <p/>
 7. Constraint within a subquery can only reference vertices/edges within
 that subquery and enclosed subqueries
 Actually, as of 2004.1.6, constraints can only reference vertices/edges within the same subquery
 ... checked by checkTestEleConst()
 <p/>
 8. No annotation allowed on boundary vertex of subquery.
 ... checked by checkEdge()
 <p/>
 <p/>
 c. other items:
 <ul>
 <li>1. annotated vertices require all incident edges to be annotated (no UA cases)
 ... checked by checkAnnotVertex()
 <li>2. verify that at least one of every edge's vertices is in the same parent
 AbstractQuery as the edge itself
 ... checked by checkEdge()
 <li>3. verify no nested subqueries
 ... checked by checkNestedSubquery()
 <li>4. verify no duplicate item names
 ... checked by checkDuplicateItemNames()
 <li>5. edge min annotation cannot be 0. in theory they are allowed, but our implementation cannot handle them
 ... checked by checkEdge()
 <li>6. edge and vertex names cannot be empty (i.e., "")
 ... checked by checkForEmptyName()
 </ul>
<P>

<P>
<HR>

<P>

<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../kdl/prox/qgraph2/QueryValidator.html#QueryValidator(kdl.prox.qgraph2.Query)">QueryValidator</A></B>(<A HREF="../../../kdl/prox/qgraph2/Query.html" title="class in kdl.prox.qgraph2">Query</A>&nbsp;query)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Full-arg constructor.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="QueryValidator(kdl.prox.qgraph2.Query)"><!-- --></A><H3>
QueryValidator</H3>
<PRE>
public <B>QueryValidator</B>(<A HREF="../../../kdl/prox/qgraph2/Query.html" title="class in kdl.prox.qgraph2">Query</A>&nbsp;query)
               throws <A HREF="../../../kdl/prox/qgraph2/QGValidationError.html" title="class in kdl.prox.qgraph2">QGValidationError</A></PRE>
<DL>
<DD>Full-arg constructor. Checks query's validity. Throws QGValidationError
 if invalid. Otherwise (valid) returns normally.
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>query</CODE> - the Query whose validity is to be checked
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../kdl/prox/qgraph2/QGValidationError.html" title="class in kdl.prox.qgraph2">QGValidationError</A></CODE> - if invalid</DL>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/QueryValidator.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../kdl/prox/qgraph2/QueryIterHandlerEmptyAdapter.html" title="class in kdl.prox.qgraph2"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../kdl/prox/qgraph2/QueryXMLUtil.html" title="class in kdl.prox.qgraph2"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html?kdl/prox/qgraph2/QueryValidator.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="QueryValidator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#methods_inherited_from_class_java.lang.Object">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;METHOD</FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
