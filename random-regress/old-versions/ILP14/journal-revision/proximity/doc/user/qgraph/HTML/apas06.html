<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <!-- Part of the open-source Proximity system (see LICENSE for
      copyright and license information). -->
      <title>Working with Queries</title>
      <link rel="stylesheet" href="prox.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
      <link rel="start" href="index.html" title="Proximity 4.3 QGraph Guide">
      <link rel="up" href="apa.html" title="Appendix&nbsp;A.&nbsp;Using the Proximity Query Editor">
      <link rel="prev" href="apas05.html" title="Working with Subqueries">
      <link rel="next" href="apb.html" title="Appendix&nbsp;B.&nbsp;XML Representation">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div xmlns:exsl="http://exslt.org/common" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="apas05.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Appendix&nbsp;A.&nbsp;Using the Proximity Query Editor</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="apb.html">Next</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="d0e8695"></a>Working with Queries
                  </h2>
               </div>
            </div>
         </div>
         <h3><a name="qe_edit"></a>To edit an existing query:
         </h3><a class="indexterm" name="d0e8702"></a><a class="indexterm" name="d0e8707"></a><a class="indexterm" name="d0e8712"></a><a class="indexterm" name="d0e8717"></a><a class="indexterm" name="d0e8720"></a><p>You can load an existing (previously saved) query in the Query
            Editor.  Editing an existing query is often an efficient way to create
            similar queries.  You can elect to edit a saved query from either the
            Proximity Database Browser or from within the Query Editor.
         </p>
         <div class="orderedlist">
            <p xmlns:exsl="http://exslt.org/common" class="title"><b>To edit a saved query from the Proximity Database Browser:</b></p><a class="indexterm" name="d0e8730"></a><ol type="1" compact>
               <li>
                  <p>From the <span><strong class="guimenu">Query</strong></span> menu, select <span><strong class="guimenuitem">Edit
                           Query</strong></span>.
                     <a class="indexterm" name="d0e8744"></a>
                     <a class="indexterm" name="d0e8750"></a>
                     Proximity displays the <span class="guilabel">Open</span> dialog.
                  </p>
               </li>
               <li>
                  <p>Navigate the the directory containing the query file.  Select
                     the query to be edited and press <span><strong class="guibutton">OK</strong></span>.
                     
                  </p>
               </li>
            </ol>
         </div>
         <div class="orderedlist">
            <p xmlns:exsl="http://exslt.org/common" class="title"><b>To edit a saved query from the Query Editor:</b></p>
            <ol type="1" compact>
               <li>
                  <p>In the <span><strong class="guimenu">File</strong></span> menu, choose
                     <span><strong class="guimenuitem">Open</strong></span> or press <span class="keycap">Ctrl-O</span>.
                     Proximity displays the <span class="guilabel">Open</span> dialog.
                     
                  </p>
               </li>
               <li>
                  <p>Navigate the the directory containing the query file.  Select
                     the query to be edited and press <span><strong class="guibutton">OK</strong></span>.
                     
                  </p>
               </li>
            </ol>
         </div>
         <p>Proximity displays the selected query in the Query Editor
            display area.
         </p>
         <h3><a name="qe_addconst"></a>To add a constraint:
         </h3><a class="indexterm" name="d0e8793"></a><p>Because <a xmlns:exsl="http://exslt.org/common" href="go01.html#d17e228"><span class="glossterm">constraints</span></a>
            compare the 
            <a xmlns:exsl="http://exslt.org/common" href="go01.html#d17e385"><span class="glossterm">identity</span></a> or
            <a xmlns:exsl="http://exslt.org/common" href="go01.html#d17e41"><span class="glossterm">attribute values</span></a> of
            two different query elements, constraints are properties of a query as
            a whole rather than of any individual query element.
         </p>
         <div class="orderedlist">
            <ol type="1" compact>
               <li>
                  <p>In the <span class="guilabel">Constraints</span> area at the bottom of
                       the query properties pane, click <span><strong class="guibutton">Add</strong></span>. The
                       Query Editor adds a temporary, example constraint, shown in the
                       query properties pane.
                  </p>
               </li>
               <li>
                  <p>Edit the temporary, example constraint to show the correct
                       constraint.
                  </p>
               </li>
               <li>
                  <p>Press <span class="keycap">Tab</span> or <span class="keycap">Return</span>.
                  </p>
               </li>
            </ol>
         </div>
         <h3><a name="qe_delconst"></a>To delete a constraint:
         </h3>
         <div class="orderedlist">
            <ol type="1" compact>
               <li>
                  <p>Select the constraint you want to delete by clicking the
                       corresponding entry in the query properties pane&#8217;s
                       <span class="guilabel">Value</span> column.
                  </p>
               </li>
               <li>
                  <p>In the <span class="guilabel">Constraints</span> area, click
                       <span><strong class="guibutton">Remove</strong></span>. The Query Editor deletes the selected
                       constraint.
                  </p>
               </li>
            </ol>
         </div>
         <h3><a name="qe_addinfo"></a>To add query information:
         </h3><a class="indexterm" name="d0e8855"></a><a class="indexterm" name="d0e8860"></a><p>To help you remember the purpose of or other information about a
            query, you can save meta-information with your query.
            The XML query format supports saving a name and description for
            each query.
         </p>
         <div class="orderedlist">
            <p xmlns:exsl="http://exslt.org/common" class="title"><b>To add a query name:</b></p><a class="indexterm" name="d0e8868"></a><a class="indexterm" name="d0e8873"></a><ol type="1" compact>
               <li>
                  <p>In the query properties pane, click the value for
                       <span class="guilabel">Name</span>.
                  </p>
               </li>
               <li>
                  <p>Change the value to the new query name.</p>
               </li>
               <li>
                  <p>Press <span class="keycap">Tab</span> or <span class="keycap">Return</span>.
                  </p>
               </li>
            </ol>
         </div>
         <div class="orderedlist">
            <p xmlns:exsl="http://exslt.org/common" class="title"><b>To add a query description:</b></p><a class="indexterm" name="d0e8899"></a><a class="indexterm" name="d0e8902"></a><ol type="1" compact>
               <li>
                  <p>In the query properties pane, click the value for
                       <span class="guilabel">Description</span>.
                  </p>
               </li>
               <li>
                  <p>Change the value to the correct query description.</p>
               </li>
               <li>
                  <p>Press <span class="keycap">Tab</span> or <span class="keycap">Return</span>.
                  </p>
               </li>
            </ol>
         </div>
         <h3><a name="qe_save"></a>To save a query:
         </h3><a class="indexterm" name="d0e8929"></a><a class="indexterm" name="d0e8934"></a><p>It is frequently useful to save a query for future use.  Saved
            queries are written out to an XML file.  The Query Editor understands
            this XML format
            <a class="indexterm" name="d0e8939"></a>
            <a class="indexterm" name="d0e8943"></a>
            and can reload saved queries for future use or
            editing.  Make sure that your query is valid before saving
            it&#8212;invalid queries may not be saved correctly or may not display
            correctly in the Query Editor when reloaded.
         </p>
         <div class="itemizedlist">
            <ul type="disc" compact>
               <li>
                  <p>In the <span><strong class="guimenu">File</strong></span> menu, choose
                       <span><strong class="guimenuitem">Save</strong></span> or press <span class="keycap">Ctrl-S</span>.
                  </p>
                  <div class="itemizedlist">
                     <ul type="circle" compact>
                        <li>
                           <p>If the query has been saved previously, the new information is
                                  written out to the associated file.
                           </p>
                        </li>
                        <li>
                           <p>If the query has not been saved previously, Proximity displays
                                  the <span class="guilabel">Open</span> dialog.
                           </p>
                           <div class="orderedlist">
                              <ol type="1" compact>
                                 <li>
                                    <p>Navigate to the target directory.</p>
                                 </li>
                                 <li>
                                    <p>Enter a filename in the <span class="guilabel">Save As</span>
                                              box.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Click <span><strong class="guibutton">Save</strong></span>.
                                    </p>
                                 </li>
                              </ol>
                           </div>
                        </li>
                     </ul>
                  </div>
               </li>
            </ul>
         </div>
         <p>Once a query has been saved to an XML file, you can save any
            new changes by selecting <span><strong class="guimenuitem">Save</strong></span> or pressing
            <span class="keycap">Ctrl-S</span>.
         </p>
         <h3><a name="qe_validate"></a>To validate a query:
         </h3><a class="indexterm" name="d0e9000"></a><a class="indexterm" name="d0e9003"></a><p>The Query Editor checks only that the query is syntactically
            correct; it cannot verify semantic information.  For example, it
            reports an error if the query is 
            <a xmlns:exsl="http://exslt.org/common" href="go01.html#d17e286"><span class="glossterm">disconnected</span></a> but
            cannot check whether 
            attributes listed in conditions or constraints actually exist in the
            database.
         </p>
         <p>A query must be valid before it can be executed.  Additionally,
            invalid queries may not be correctly displayed in the Query Editor
            when reloaded after saving.  
            The Query Editor&#8217;s status list
            <a class="indexterm" name="d0e9015"></a>
            <a class="indexterm" name="d0e9019"></a>
            shows whether the currently displayed
            query is valid or not.  Check the status bar before executing or
            saving queries.
         </p>
         <div class="itemizedlist">
            <ul type="disc" compact>
               <li>
                  <p>Check the message displayed in the <span class="guilabel">status
                        list</span> at the bottom of the Query Editor window.
                  </p>
                  <div class="itemizedlist">
                     <ul type="circle" compact>
                        <li>
                           <p>If the query contains no syntactic errors, the
                                <span class="guilabel">status list</span> shows <code class="computeroutput">Query is
                                   Valid</code>.
                           </p>
                        </li>
                        <li>
                           <p>If the query contains errors, the <span class="guilabel">status
                                   list</span> shows the number of validation
                                errors.
                           </p>
                        </li>
                     </ul>
                  </div>
               </li>
            </ul>
         </div>
         <p>If the <span class="guilabel">status list</span> shows one or more errors,
            <a class="indexterm" name="d0e9053"></a>
            <a class="indexterm" name="d0e9057"></a>
            click the up/down arrows to the right of the <span class="guilabel">status
               list</span> to display the specific errors for this query.
            Fix any errors before executing or saving the query.
         </p>
         <h3><a name="qe_execute"></a>To execute a query:
         </h3><a class="indexterm" name="d0e9070"></a><a class="indexterm" name="d0e9075"></a><a class="indexterm" name="d0e9078"></a><p>You can execute queries from the Proximity Database Browser
            or from within the Query Editor.
         </p>
         <div class="orderedlist">
            <p xmlns:exsl="http://exslt.org/common" class="title"><b>To execute the current query (Query Editor):</b></p>
            <ol type="1" compact>
               <li>
                  <p>In the <span><strong class="guimenu">File</strong></span> menu,
                       choose <span><strong class="guimenuitem">Run</strong></span> or press
                       <span class="keycap">Ctrl-R</span>. Proximity asks you to provide a name for
                       the <a xmlns:exsl="http://exslt.org/common" href="go01.html#d17e234"><span class="glossterm">container</span></a><a class="indexterm" name="d0e9102"></a>
                     <a class="indexterm" name="d0e9108"></a>
                       that will hold the query&#8217;s results.
                  </p>
               </li>
               <li>
                  <p>Enter a name for the container and press
                       <span class="keycap">OK</span>. Proximity prints a trace of the query&#8217;s
                       execution in a new window.
                  </p>
               </li>
               <li>
                  <p>Close the trace window after query execution completes and
                       you have finished examining the trace.
                  </p>
               </li>
            </ol>
         </div>
         <div class="orderedlist">
            <p xmlns:exsl="http://exslt.org/common" class="title"><b>To execute a saved query (Proximity Database Browser):</b></p><a class="indexterm" name="d0e9126"></a><ol type="1" compact>
               <li>
                  <p>From the <span><strong class="guimenu">Query</strong></span> menu, select <span><strong class="guimenuitem">Run
                           Query</strong></span>.  Proximity asks you to provide a name for
                     the container that will hold the query&#8217;s results.
                  </p>
               </li>
               <li>
                  <p>Enter a name for the container and press
                       <span class="keycap">OK</span>. Proximity prints a trace of the query&#8217;s
                       execution in a new window.
                  </p>
               </li>
               <li>
                  <p>Close the trace window after query execution completes and
                       you have finished examining the trace.
                  </p><a class="indexterm" name="d0e9149"></a><a class="indexterm" name="d0e9150"></a><a class="indexterm" name="d0e9151"></a></li>
            </ol>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="apas05.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="apa.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="apb.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">Working with Subqueries&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Appendix&nbsp;B.&nbsp;XML Representation</td>
            </tr>
         </table>
      </div>
   </body>
</html>