<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <!-- Part of the open-source Proximity system (see LICENSE for
      copyright and license information). -->
      <title>Executing a Query from the Command Line</title>
      <link rel="stylesheet" href="prox.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
      <link rel="start" href="index.html" title="Proximity 4.3 Tutorial">
      <link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Querying the Database">
      <link rel="prev" href="ch05s08.html" title="Executing a Query from the Proximity Database Browser">
      <link rel="next" href="ch05s10.html" title="Querying Containers">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div xmlns:exsl="http://exslt.org/common" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="ch05s08.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Chapter&nbsp;5.&nbsp;Querying the Database</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch05s10.html">Next</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="query_running_cli"></a>Executing a Query from the Command Line
                  </h2>
               </div>
            </div>
         </div><a class="indexterm" name="d0e9546"></a><a class="indexterm" name="d0e9551"></a><a class="indexterm" name="d0e9556"></a><p>In addition to executing queries from the Proximity Database Browser and Query
            Editor, you can execute saved queries from the command line using the
            <span><strong class="command">query.sh</strong></span> shell script (Linux/Mac&nbsp;OS&nbsp;X) or
            <span><strong class="command">query.bat</strong></span> (Windows) batch file.
            <a class="indexterm" name="d0e9569"></a>
            <a class="indexterm" name="d0e9573"></a>
            <a class="indexterm" name="d0e9579"></a>
            
         </p>
         <div class="procedure"><a name="ex_queries_1dc"></a><p xmlns:exsl="http://exslt.org/common" class="title"><b>Exercise&nbsp;5.8.&nbsp;Executing a query from the command line:</b></p>
            <p>This exercise re-runs the research-clusters2 query.
               <a class="indexterm" name="d0e9591"></a>
               <a class="indexterm" name="d0e9595"></a>
               You can use either the <code class="filename">rc2.qg2.xml</code> query you
               created in <a href="ch05s04.html#ex_queries_annotations" title="Exercise&nbsp;5.3.&nbsp;Creating a query with numeric annotations:">Exercise&nbsp;5.3</a> or the
               <code class="filename">research-clusters2.qg2.xml</code> query included with
               the distribution in <code class="filename">$PROX_HOME/doc/user/tutorial/examples</code>.
               The query results will overwrite the existing research-clusters2
               <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e234"><span class="glossterm">container</span></a>. Specify a different container name
               if you want to keep your original 
               <span class="token">research-clusters2</span> container.
            </p>
            <p>
               
            </p>
            <div class="caution" style="margin-left: 0.5in; margin-right: 0.5in;">
               <table border="0" summary="Caution">
                  <tr>
                     <td rowspan="2" align="center" valign="top" width="25"><img alt="[Caution]" src="images/caution.png"></td>
                     <th align="left"></th>
                  </tr>
                  <tr>
                     <td align="left" valign="top">
                        <p>When executing queries from the Proximity Database Browser or Query Editor,
                           Proximity prompts you to confirm overwriting an existing container.
                           Proximity does not provide a similar prompt when executing queries
                           from the command line and instead silently overwrites the existing
                           container.
                        </p>
                     </td>
                  </tr>
               </table>
            </div>
            <p>
               
            </p>
            <p>Before beginning, make sure that you are serving the ProxWebKB
               database using Mserver.
            </p>
            <ul>
               <li>
                  <p>Execute the <span><strong class="command">query.sh</strong></span> shell script or
                     <span><strong class="command">query.bat</strong></span> batch file, specifying
                     
                  </p>
                  <div class="variablelist">
                     <dl>
                        <dt><span class="term"><em class="replaceable"><code>host:port</code></em></span></dt>
                        <dd>
                           <p>the Monet server&#8217;s
                                    host and port (<code class="literal">localhost:30000</code> if you are
                                    running the Monet server on your local machine and did not
                                    explicitly set the port to a different value on the command line)
                                    
                           </p><a class="indexterm" name="d0e9648"></a></dd>
                        <dt><span class="term"><em class="replaceable"><code>queryXMLFile</code></em></span></dt>
                        <dd>
                           <p>the file containing the saved query; use either your
                                    <code class="filename">rc2.gq2.xml</code> query or the query listed
                                    below
                           </p>
                        </dd>
                        <dt><span class="term"><em class="replaceable"><code>collectionName</code></em></span></dt>
                        <dd>
                           <p>the name of the results container</p>
                        </dd>
                        <dt><span class="term"><em class="replaceable"><code>inputContainer</code></em></span></dt>
                        <dd>
                           <p>[optional] the name of the input container&#8212; the
                                    container to search when finding matches for the query
                           </p>
                        </dd>
                     </dl>
                  </div>
                  <p>
                     
                     The optional <em class="replaceable"><code>inputContainer</code></em> defaults to the
                     <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e697"><span class="glossterm">root container</span></a> (the entire database) if it is
                     omitted.  To explicitly 
                     specify the input container, Proximity uses a path-like syntax that
                     reflects the container hierarchy for the specified
                     container. Container names are separated by forward slashes with the
                     initial <code class="literal">/</code> representing the root container.  For
                     example, <code class="literal">/c1/c2</code> signifies container
                     &#8220;<span class="token">c2</span>&#8221;, which is under
                     container &#8220;<span class="token">c1</span>&#8221;, which in 
                     turn is under the root container. All 
                     container paths are absolute in this sense&#8212;they all must include
                     an initial slash indicating the root container. Do not include a
                     trailing &#8220;<code class="literal">/</code>&#8221;.
                     See the <a href="ch05s10.html" title="Querying Containers">&#8220;Querying Containers&#8221;</a> section, below, for
                     more information on querying containers.
                  </p>
                  <p>In the command lines below, substitute the appropriate host and
                     port information if you are running the Monet server on a different
                     machine or are using a different port.
                  </p><pre class="synopsis">&gt; <strong class="userinput"><code>cd $PROX_HOME</code></strong>
&gt; <strong class="userinput"><code>bin/query.sh localhost:30000 \
  $PROX_HOME/doc/user/tutorial/examples/research-clusters2.qg2.xml \
  research-clusters2</code></strong>
</pre><p>
                     
                     
                     
                     Proximity writes the execution trace to the window in which you executed
                     the above command. The last lines should be
                     similar to the following excerpt (leading information showing elapsed
                     time has been omitted from the trace for brevity):
                     
                  </p><pre class="screen">INFO  qgraph2.QueryGraph2CompOp: -&gt; found 83 subgraphs
INFO kdl.prox.qgraph2.QueryGraph2CompOp - -&gt; query results saved in
   container: research-clusters2
INFO  qgraph2.QueryGraph2CompOp: * query: done
INFO  app.Query: * done executing query
</pre><p>
                     
                  </p>
               </li>
            </ul>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="ch05s08.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="ch05s10.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">Executing a Query from the Proximity Database Browser&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Querying Containers</td>
            </tr>
         </table>
      </div>
   </body>
</html>