<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <!-- Part of the open-source Proximity system (see LICENSE for
      copyright and license information). -->
      <title>Understanding and viewing relational probability trees</title>
      <link rel="stylesheet" href="prox.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
      <link rel="start" href="index.html" title="Proximity 4.3 Tutorial">
      <link rel="up" href="ch07s04.html" title="Relational Probability Trees">
      <link rel="prev" href="ch07s04.html" title="Relational Probability Trees">
      <link rel="next" href="ch07s04s03.html" title="Using temporal attributes in a relational probability tree">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div xmlns:exsl="http://exslt.org/common" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="ch07s04.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Relational Probability Trees</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch07s04s03.html">Next</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect2" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h3 class="title"><a name="d0e15359"></a>Understanding and viewing relational probability trees
                  </h3>
               </div>
            </div>
         </div><a class="indexterm" name="d0e15362"></a><a class="indexterm" name="d0e15367"></a><a class="indexterm" name="d0e15372"></a><p>To help you understand and visualize the resulting RPT model,
            Proximity provides an RPT viewer.  This section describes
            how to display a graphic representation of the RPT and how interpret
            the labels on the tree&#8217;s nodes.
         </p>
         <div class="procedure"><a name="ex_graph_rpt"></a><p xmlns:exsl="http://exslt.org/common" class="title"><b>Exercise&nbsp;7.3.&nbsp;Viewing relational probability trees:</b></p>
            <p>This script requires the RPT created in 
               <a href="ch07s04.html#ex_models_rpt" title="Exercise&nbsp;7.2.&nbsp;Learning and applying the relational probability tree model:">Exercise&nbsp;7.2</a>. You must have completed
               <a href="ch07s04.html#ex_models_rpt" title="Exercise&nbsp;7.2.&nbsp;Learning and applying the relational probability tree model:">Exercise&nbsp;7.2</a> before running the
               current exercise. Start the Proximity Database Browser if it is not already
               running.
            </p>
            <ol type="1">
               <li>
                  <p>If you have not already done so, copy
                     <code class="filename">rpt2.dtd</code> to the directory containing the saved RPT
                     XML file, <code class="filename">ProxWebKB_RPT.xml</code>.
                     
                  </p><pre class="synopsis">&gt; <strong class="userinput"><code>cp $PROX_HOME/resources/rpt2.dtd $PROX_HOME</code></strong>
</pre><p>
                     Proximity requires that the DTD 
                     <code class="filename">rpt2.dtd</code>
                     <a class="indexterm" name="d0e15407"></a>
                     <a class="indexterm" name="d0e15413"></a>
                     be in the same directory as the RPT XML file to be displayed,
                     (<code class="filename">$PROX_HOME</code> if you are following the tutorial).
                  </p>
               </li>
               <li>
                  <p>From the <span><strong class="guimenu">Model</strong></span> menu, choose
                     <span><strong class="guimenuitem">Graph RPT</strong></span>.
                     Proximity displays the <span class="guilabel">Open</span> dialog.
                  </p>
               </li>
               <li><a name="step_graph_rpt"></a><p>Navigate to the current working directory 
                     (<code class="filename">$PROX_HOME</code> if you are following the tutorial)
                     and choose <code class="filename">ProxWebKB_RPT.xml</code>. Click
                     <span><strong class="guibutton">Open</strong></span>.
                  </p>
                  <p>Proximity opens a window showing a tree view of the RPT learned
                     for this data.
                     
                  </p>
                  <div class="informalfigure">
                     <div class="mediaobject" align="center">
                        <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                           <tr>
                              <td align="center" valign="bottom"><img src="images/GUI_RPT01.png" align="middle" width="630"></td>
                           </tr>
                        </table>
                     </div>
                  </div>
                  <p>
                     
                  </p>
               </li>
               <li>
                  <p>If the graph does not fit the window properly, you can change
                     the magnification level to adjust the display.
                     
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc" compact>
                        <li>
                           <p>To make the graph fit the current window, choose
                                <span><strong class="guimenuitem">Zoom to Fit</strong></span> from the
                                <span><strong class="guimenu">View</strong></span> menu.  Proximity adjusts the size of the
                                graph to fit the window.  Proximity cannot shrink the graph
                                beyond a certain size, so large graphs may still extend beyond small
                                window borders.
                           </p>
                        </li>
                        <li>
                           <p>To display the graph at the default magnification, choose
                                <span><strong class="guimenuitem">Center on Root</strong></span> from the
                                <span><strong class="guimenu">View</strong></span> menu.
                           </p>
                        </li>
                        <li>
                           <p>To zoom in, click the <span><strong class="guibutton">+</strong></span>
                                button at the bottom of the graph window.
                           </p>
                        </li>
                        <li>
                           <p>To zoom out, click the <span><strong class="guibutton">-</strong></span> button at the
                                bottom of the graph window.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>
                     You can drag the graph to a different position in the window,
                     or use the bottom and side scroll bars to reposition the graph in the
                     window.
                  </p>
               </li>
               <li>
                  <p>You can optionally save the tree as a JPEG file.
                     <a class="indexterm" name="d0e15491"></a>
                     
                  </p>
                  <ol type="a">
                     <li>
                        <p>In the RPT display window, choose
                               <span><strong class="guimenuitem">Save as JPEG Image</strong></span> from the 
                               <span><strong class="guimenu">File</strong></span> menu.
                               Proximity displays the <span class="guilabel">Save</span> dialog.
                        </p>
                     </li>
                     <li>
                        <p>Navigate to the target directory and enter a name for the
                               JPEG file. Click <span><strong class="guibutton">Save</strong></span>.
                        </p>
                     </li>
                  </ol>
               </li>
            </ol>
         </div>
         <p>The following section discusses how to interpret the displayed
            RPT.
         </p>
         <div class="sect3" lang="en">
            <div class="titlepage">
               <div>
                  <div>
                     <h4 class="title"><a name="d0e15521"></a>Understanding relational probability trees
                     </h4>
                  </div>
               </div>
            </div><a class="indexterm" name="d0e15524"></a><a class="indexterm" name="d0e15529"></a><p>An RPT represents a series of questions to ask about an item to
               be classified and its relational neighborhood.  At each node in the
               tree, the RPT can ask questions about any of the attributes used to
               train and test the model.  The answers to those question determine the
               path through the tree.  The leaf nodes in the tree tell us the
               class label predicted by the model.
               In this example, the target item is a web page, and the model
               predicts the value for the page&#8217;s 
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">pagetype</span> attribute.
            </p>
            <p>To see how the model makes predictions, we examine an
               <a class="indexterm" name="d0e15539"></a>
               <a class="indexterm" name="d0e15545"></a>
               example web page, object <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">535</span>, and see how
               the RPT classifies this object.  As we can see from the RPT, 
               to classify this page we 
               need to know the attribute values not just for the target object, but
               also for the objects that link to and are linked
               from this object.  In the <span class="token">1d-clusters</span>
               subgraphs, these related objects are identified as
               <em class="token">linked_to_page</em> and 
               <em class="token">linked_from_page</em> objects, respectively.
               The subgraph whose <em class="token">core_page</em> object is
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">535</span> is shown below.
               
            </p>
            <div class="informalfigure">
               <div class="mediaobject" align="center">
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                     <tr>
                        <td align="center" valign="bottom"><img src="images/GUI_Subg534.png" align="middle" width="630"></td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               
            </p>
            <p>
               The root node in the RPT starts by examining the value of the 
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">page_num_inlinks</span> attribute for the 
               <em class="token">linked_to_page</em> objects
               in the current subgraph (denoted by
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">linked_to_page.page_num_inlinks</span> in the RPT).
               If the proportion of all <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">linked_to_page</span>
               objects having
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">page_num_inlinks</span>&nbsp;=&nbsp;1 is greater
               than or equal to 0.083, 
               we traverse the left edge in the RPT.
            </p>
            <div xmlns:exsl="http://exslt.org/common" class="sidebar">
               <table border="0" bgcolor="#CCCCFF">
                  <tr>
                     <td>
                        <p>For all nodes in the RPT, if the subgraph matches the feature
                           specified in a node, we traverse the left or &#8220;yes&#8221; edge;
                           if the subgraph does not match the node&#8217;s feature, we traverse
                           the right or &#8220;no&#8221; edge.
                           Hover the mouse over an edge in the tree to see its label.
                        </p>
                     </td>
                  </tr>
               </table>
            </div>
            <p>Subgraph&nbsp;<span class="token">534</span> has two
               <em class="token">linked_to_pages</em>, so we
               check the value of the <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">page_num_inlinks</span>
               attribute for these pages.
               
            </p>
            <div class="informalfigure">
               <div class="mediaobject" align="center">
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                     <tr>
                        <td align="center" valign="bottom"><img src="images/RPT_LinkedToPages.png" align="middle" width="630"></td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               Object <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">1468</span> has a value of 1 for its 
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">page_num_inlinks</span> attribute, and 
               object <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">1281</span> has a value of 100 for its
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">page_num_inlinks</span> attribute.
               The proportion of <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">linked_to_pages</span> with
               a value of&nbsp;1 is thus&nbsp;0.50, which is greater than&nbsp;0.083.
               Therefore, subgraph&nbsp;<span class="token">534</span> satisfies
               the first test, and we traverse the left edge in the RPT to the next
               node in the tree.
            </p>
            <p>The next test looks at how many
               <em class="token">linked_to_page</em> objects are linked to
               the core object in the subgraph, represented by
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">degree(linked_to_page)</span> in the tree.
               Specifically, we test whether the subgraph contains at least one 
               <em class="token">linked_to_page</em> object.
               Subgraph&nbsp;<span class="token">534</span> contains two
               <em class="token">linked_to_page</em> objects,
               so we pass this test and again traverse the left edge to the next
               node in the tree.
            </p>
            <p>The third node examines the value of the 
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">url_hierarchy1b</span> attribute for the
               subgraph&#8217;s <em class="token">core_page</em> object.
               Specifically, the RPT asks whether the value of this attribute is 
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">courses</span>.  Because this node examines a
               single value for a single object, it does not require an
               aggregation function
               <a class="indexterm" name="d0e15658"></a>
               like proportion or degree.  This is indicated by the
               <code class="literal">nop</code> (no operator) aggregation function as
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">nop([core_page.url_hierarchy1b])=courses</span>.
               
            </p>
            <div class="informalfigure">
               <div class="mediaobject" align="center">
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                     <tr>
                        <td align="center" valign="bottom"><img src="images/GUI_Obj535_URLHierarchy1b.png" align="middle" width="630"></td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               The value of <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">url_hierarchy1b</span> for
               object&nbsp;535 is <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">People</span>, so this time we
               fail the test and traverse the right edge to the leaf node.
            </p>
            <p>Leaf nodes in the RPT tell us the probabilistic counts (out of all
               objects from the training set that reach this leaf node) for
               each potential classification of this object.
               Because some training instances may not have the information necessary
               to determine which path to take at a split (e.g., it may not have a
               value for the relevant attribute), the model assigns an appropriate
               percentage of the instance to each path, resulting in non-integer
               values at the leaf nodes.
               We can see that objects that reach this leaf node are much more likely
               to be student pages than any other page type.  Therefore, the model
               predicts that  object&nbsp;<span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">535</span> has a 
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">pagetype</span> of <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">Student</span>,
               which our script stored in the
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">rpt_pagetype_prediction</span> attribute for the
               subgraph.
               
            </p>
            <div class="informalfigure">
               <div class="mediaobject" align="center">
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                     <tr>
                        <td align="center" valign="bottom"><img src="images/RPT_LeafAndSubg534Attrs.png" align="middle" width="630"></td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               Examining the attributes of 
               object&nbsp;<span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">535</span>, we see that its
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">pagetype</span> attribute is indeed 
               <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">Student</span> and that the model made the correct
               prediction for this subgraph.
               
            </p>
            <div class="informalfigure">
               <div class="mediaobject" align="center">
                  <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                     <tr>
                        <td align="center" valign="bottom"><img src="images/GUI_Obj535_Pagetype.png" align="middle" width="630"></td>
                     </tr>
                  </table>
               </div>
            </div>
            <p>
               <a class="indexterm" name="d0e15718"></a>
               <a class="indexterm" name="d0e15720"></a>
               
            </p>
         </div>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="ch07s04.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="ch07s04.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="ch07s04s03.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">Relational Probability Trees&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Using temporal attributes in a relational probability
                  tree
               </td>
            </tr>
         </table>
      </div>
   </body>
</html>