<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <!-- Part of the open-source Proximity system (see LICENSE for
      copyright and license information). -->
      <title>Exploring Containers and Subgraphs</title>
      <link rel="stylesheet" href="prox.css" type="text/css">
      <meta name="generator" content="DocBook XSL Stylesheets V1.71.1">
      <link rel="start" href="index.html" title="Proximity 4.3 Tutorial">
      <link rel="up" href="ch05.html" title="Chapter&nbsp;5.&nbsp;Querying the Database">
      <link rel="prev" href="ch05s02.html" title="A First Proximity Query">
      <link rel="next" href="ch05s04.html" title="Grouping Elements in a Query">
   </head>
   <body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
      <div xmlns:exsl="http://exslt.org/common" class="navheader">
         <table width="100%" summary="Navigation header">
            <tr>
               <td width="20%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a>&nbsp;
               </td>
               <th width="60%" align="center">Chapter&nbsp;5.&nbsp;Querying the Database</th>
               <td width="20%" align="right">&nbsp;<a accesskey="n" href="ch05s04.html">Next</a></td>
            </tr>
         </table>
         <hr>
      </div>
      <div class="sect1" lang="en">
         <div class="titlepage">
            <div>
               <div>
                  <h2 class="title" style="clear: both"><a name="query_browsing"></a>Exploring Containers and Subgraphs
                  </h2>
               </div>
            </div>
         </div><a class="indexterm" name="idx_queries_subg1"></a><a class="indexterm" name="idx_queries_subg2"></a><a class="indexterm" name="idx_queries_subg3"></a><a class="indexterm" name="idx_queries_subg4"></a><p>You can use the Proximity Database Browser to examine the results of the queries
            you execute.  The Proximity Database Browser supports examining the 
            <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e749"><span class="glossterm">subgraphs</span></a> and 
            <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e234"><span class="glossterm">containers</span></a> created as a
            result of executing queries via both browser-style access
            (clicking identifiers to see that item&#8217;s details) and direct
            access via the location bar.
            <a class="indexterm" name="d0e7060"></a>
            <a class="indexterm" name="d0e7066"></a>
            <a class="indexterm" name="d0e7072"></a>
            The following exercise illustrates how to use both
            of these methods to examine the contents of the container created in
            the previous exercise. See <a href="apa.html" title="Appendix&nbsp;A.&nbsp;Proximity Quick Reference">Appendix&nbsp;A, <i>Proximity Quick Reference</i></a> for a
            summary of how to access Proximity database elements using the location
            bar.
         </p>
         <div class="procedure"><a name="d0e7080"></a><p xmlns:exsl="http://exslt.org/common" class="title"><b>Exercise&nbsp;5.2.&nbsp;Exploring containers and subgraphs:</b></p>
            <p>This exercise requires the container created in 
               <a href="ch05s02.html#ex_queries_rc1" title="Exercise&nbsp;5.1.&nbsp;Creating a first Proximity query:">Exercise&nbsp;5.1</a>. You must have completed 
               <a href="ch05s02.html#ex_queries_rc1" title="Exercise&nbsp;5.1.&nbsp;Creating a first Proximity query:">Exercise&nbsp;5.1</a> before beginning the current
               exercise.
            </p>
            <p>Before beginning, make sure that you are serving the ProxWebKB
               database using Mserver. Start the Proximity Database Browser if it is not already
               running.
            </p>
            <ol type="1">
               <li>
                  <p>Click <span><strong class="guibutton">Home</strong></span> to go to the Proximity Database Browser start page.
                  </p>
               </li>
               <li>
                  <p>Click <span><strong class="guibutton">Containers</strong></span> or enter
                     <strong class="userinput"><code>cont:/containers</code></strong> in the location bar.  Use the
                     <code class="code">cont:</code> protocol to access containers using the location
                     bar.
                     Proximity displays the list of top-level containers in the ProxWebKB
                     database.
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_ContainerList.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     The initial container page shows that you are exploring the 
                     contents of the <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e697"><span class="glossterm">root container</span></a>.
                     <a class="indexterm" name="d0e7118"></a>
                     <a class="indexterm" name="d0e7122"></a>
                     The root container is provided as a convenience
                     for accessing a database&#8217;s other containers; it does not
                     explicitly exist in the database.  The location bar path
                     <code class="code">cont:/containers</code> corresponds to the root container.
                     
                  </p>
               </li>
               <li>
                  <p>Click <span><strong class="guibutton">research-clusters1</strong></span> or enter
                     <strong class="userinput"><code>cont:/containers/research-clusters1</code></strong> in the
                     location bar.
                     Proximity displays a list of subgraphs in the 
                     <span class="token">research-clusters1</span> container.
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_RC1_Subgraphs.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     
                  </p>
                  <p>The <span class="token">research-clusters1</span>
                     page lists the ID numbers of the first 200 subgraphs in the 
                     container.  Click a page number at the bottom of the page or add the
                     page number modifier to the end of the location bar path (e.g., 
                     <code class="code">cont:/containers/research-clusters1#2</code>) to 
                     display more subgraph IDs.  Depending on the query,
                     subgraph identifiers may or may not correspond to object 
                     <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e567"><span class="glossterm">identifiers</span></a> in the
                     database. In general, you should not assume that the subgraph labels
                     correspond to other database entities.
                  </p>
                  <p>To access any container using the location bar, use the
                     <code class="code">cont:</code> protocol and a UNIX-like path to the target
                     container.  In this example, the 
                     <span class="token">research-clusters1</span> container is a child
                     of the root container, so the full path to this container is
                     <code class="code">cont:/containers/research-clusters1</code>.
                  </p>
                  <p>Each container page includes a list of container actions at the
                     top of the page:
                     
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc" compact>
                        <li>
                           <p>The <span><strong class="guibutton">view query</strong></span> action displays the query
                                used to create this container.  Proximity displays the query in the
                                Query Editor.  You must have a copy of
                                <code class="filename">graph-query.dtd</code>
                                <a class="indexterm" name="d0e7183"></a>
                                <a class="indexterm" name="d0e7187"></a>
                                in the directory from which you
                                launched the Proximity Database Browser (i.e., <code class="filename">$PROX_HOME</code>) to
                                view the query.
                                Note that containers created by means other than querying (e.g., via
                                scripts) and containers created in Proximity&nbsp;4.2 or earlier
                                versions do not store the originating query with the resulting
                                container.
                                The <span><strong class="guibutton">view query</strong></span> option is disabled for these
                                containers.
                           </p>
                        </li>
                        <li>
                           <p>The <span><strong class="guibutton">delete</strong></span> action deletes the
                                current container. You cannot delete the root container.
                           </p><a class="indexterm" name="d0e7205"></a><a class="indexterm" name="d0e7212"></a><a class="indexterm" name="d0e7217"></a></li>
                        <li>
                           <p>The <span><strong class="guibutton">attrs</strong></span> action displays any attributes
                                <a class="indexterm" name="d0e7228"></a>
                              <a class="indexterm" name="d0e7234"></a>
                                for the current container. Although you can create container
                                attributes for your own purposes, Proximity does not currently use
                                container attributes other than to store the XML version of the
                                query used to create the container.  (The Proximity Database Browser may not display
                                the value of the <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">qgraph_query</span> attribute
                                correctly; use the <span><strong class="guibutton">view query</strong></span> action to
                                display the query in the Query Editor instead.)
                           </p>
                        </li>
                        <li>
                           <p>The <span><strong class="guibutton">query</strong></span> action executes a
                                query
                                <a class="indexterm" name="d0e7252"></a>
                                <a class="indexterm" name="d0e7258"></a>
                                against the contents of the current container.  See
                                <a href="ch05s10.html" title="Querying Containers">&#8220;Querying Containers&#8221;</a> for
                                additional information on querying containers.
                           </p>
                        </li>
                        <li>
                           <p>The <span><strong class="guibutton">thumbs</strong></span> action displays thumbnail images 
                                <a class="indexterm" name="d0e7272"></a>
                                <a class="indexterm" name="d0e7278"></a>
                                <a class="indexterm" name="d0e7284"></a>
                                of a random selection of up to nine subgraphs from this collection.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>
                     These actions are disabled for the root container.
                     
                  </p>
               </li>
               <li>
                  <p>Click <span><strong class="guibutton">thumbs</strong></span>.  Proximity displays a set of
                     thumbnail images of up to nine randomly selected subgraphs from this
                     container.
                     Because the thumbnails are selected at random, you may see a different
                     set of subgraphs than those shown below.
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_RC1_Thumbs.png" align="middle" width="517.5"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     The thumbnails show that each subgraph in the 
                     <span class="token">research-clusters1</span> container has the
                     same structure: two objects connected by a single link.
                  </p>
               </li>
               <li>
                  <p>From the thumbnail window <span><strong class="guimenu">File</strong></span> menu, choose
                     <span><strong class="guimenuitem">Show Color Legend</strong></span>. Proximity displays a key
                     that shows how vertex colors in the thumbnails map to vertex labels
                     from the query.
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_RC1_ThumbsLegend.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     
                  </p>
               </li>
               <li>
                  <p>Click to select a thumbnail.  From the thumbnail
                     window <span><strong class="guimenu">File</strong></span> menu, choose 
                     <span><strong class="guimenuitem">Open Selected Subgraph</strong></span>. Proximity displays
                     a full-size graph of the selected subgraph.
                     
                  </p>
                  <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
                     <table border="0" summary="Tip">
                        <tr>
                           <td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td>
                           <th align="left"></th>
                        </tr>
                        <tr>
                           <td align="left" valign="top">
                              <p>You can also display a full-size graph of a subgraph in the
                                 thumbnail window by double-clicking the corresponding thumbnail
                                 image.
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     More information on using the full-size subgraph display is included
                     later in this exercise.
                     
                  </p>
               </li>
               <li>
                  <p>From the Proximity Database Browser, click <span><strong class="guibutton">0</strong></span> or enter
                     <strong class="userinput"><code>subg:/containers/research-clusters1/0</code></strong>
                     in the location bar to see the contents of 
                     subgraph&nbsp;<span class="token">0</span>.
                     Proximity displays information about this subgraph. 
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_RC1_0.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     
                  </p>
                  <p>The subgraph page includes a list of subgraph actions at the top
                     of the page. These actions provide additional information about the
                     subgraph and enable navigation within the container.
                     
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc" compact>
                        <li>
                           <p>The <span><strong class="guibutton">attrs</strong></span> action displays any attributes for
                                 the current subgraph.
                           </p>
                        </li>
                        <li>
                           <p>The <span><strong class="guibutton">graph</strong></span> action displays a graph of the
                                 subgraph.
                           </p>
                        </li>
                        <li>
                           <p>The <span><strong class="guibutton">prev</strong></span> action displays the previous
                                subgraph in the container.  This link is disabled if you are viewing
                                the first subgraph in the container.
                           </p>
                        </li>
                        <li>
                           <p>The <span><strong class="guibutton">next</strong></span> action displays the next
                                subgraph in the container.  This link is disabled if you are viewing
                                the last subgraph in the container.
                           </p>
                        </li>
                        <li>
                           <p>The <span><strong class="guibutton">up</strong></span> action returns to the parent
                                 container page.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>
                     
                  </p>
                  <p>Subgraph information includes a list of the subgraph&#8217;s
                     member <a xmlns:exsl="http://exslt.org/common" href="go01.html#gloss_object"><span class="glossterm">objects</span></a> and 
                     <a xmlns:exsl="http://exslt.org/common" href="go01.html#gloss_link"><span class="glossterm">links</span></a>, identified by
                     &#8220;(O)&#8221; or &#8220;(L)&#8221; respectively. 
                     The names of the objects and links in a subgraph correspond to the
                     vertex and edge <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e528"><span class="glossterm">labels</span></a> from the
                     query that produced this subgraph.  The listed objects and links point
                     to the actual database entities, not copies.
                     
                  </p>
                  <p>As we saw in <a href="ch04s05.html" title="Using the Location Bar">&#8220;Using the Location Bar&#8221;</a>,
                     the location bar protocol changes when you access individual entities
                     instead of lists of entities.  In this case, to access an individual
                     subgraph, we use the <code class="code">subg:</code> protocol.  The container path
                     remains the same, but we add the target subgraph ID to the end of the
                     path.
                  </p>
                  <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;">
                     <table border="0" summary="Tip">
                        <tr>
                           <td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td>
                           <th align="left"></th>
                        </tr>
                        <tr>
                           <td align="left" valign="top">
                              <p>If your database includes an <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e35"><span class="glossterm">attribute</span></a>
                                 whose values provide 
                                 semantically meaningful labels for objects, such as a 
                                 <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">title</span> attribute for movies, you can
                                 set the Proximity Database Browser preferences to display this attribute value instead
                                 of object IDs.  See <a href="ch04s07.html" title="Setting Display Preferences">&#8220;Setting Display Preferences&#8221;</a>
                                 for information on using this feature.  (The ProxWebKB database does not
                                 provide a suitable attribute for this purpose, therefore we continue
                                 to display object IDs in the Proximity Database Browser for the remaining
                                 exercises.)
                              </p>
                           </td>
                        </tr>
                     </table>
                  </div>
               </li>
               <li>
                  <p>Click <span><strong class="guibutton">graph</strong></span> to display a graph
                     <a class="indexterm" name="d0e7419"></a>
                     <a class="indexterm" name="d0e7425"></a>
                     <a class="indexterm" name="d0e7431"></a>
                     of this subgraph. Proximity opens a new window displaying a
                     graph of the objects and links in the subgraph.
                     Hover the mouse over an object or link to see its OID.
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_RC1_0_graph.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p><span><strong class="guibutton">Prev</strong></span> and <span><strong class="guibutton">Next</strong></span>
                              buttons in the graph window change the display to show the previous or
                              next subgraph, respectively, in the container.  You can also use the
                              <span><strong class="guimenuitem">Next</strong></span> and <span><strong class="guimenuitem">Prev</strong></span>
                              commands from the <span><strong class="guimenu">Graph</strong></span> menu to change to another
                              subgraph.
                           </p>
                        </li>
                        <li>
                           <p>To display a key that shows how vertex colors in the graph map
                              to vertex labels from the query, choose <span><strong class="guimenuitem">Show Color
                                    Legend</strong></span> from the <span><strong class="guimenu">Graph</strong></span> menu.
                           </p>
                        </li>
                        <li>
                           <p>To change how items in the subgraph are labeled, choose either
                              <span><strong class="guimenuitem">Set Object Labels</strong></span> or 
                              <span><strong class="guimenuitem">Set Link Labels</strong></span> from the subgraph
                              <span><strong class="guimenu">Graph</strong></span> menu.  You can label items with their OID,
                              their names from the query, or the value of a selected
                              attribute.
                           </p>
                        </li>
                        <li>
                           <p>To display the details for this subgraph in a new Proximity Database Browser
                              window, choose <span><strong class="guimenuitem">Browse Subgraph</strong></span> from the
                              subgraph window <span><strong class="guimenu">Graph</strong></span> menu.
                           </p>
                        </li>
                     </ul>
                  </div>
               </li>
               <li>
                  <p>Right-click (<span class="keycap">Ctrl-click</span> for Mac&nbsp;OS&nbsp;X) any object
                     in the graph to display a context menu for that object. The context menu
                     lists actions applicable to the selected object:
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_Subgraph_ContextMenu.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     
                  </p>
                  <div class="itemizedlist">
                     <ul type="disc">
                        <li>
                           <p>Choose <span><strong class="guimenuitem">Move to center</strong></span> to make the
                                selected object the new center
                                <a class="indexterm" name="d0e7511"></a>
                                <a class="indexterm" name="d0e7517"></a>
                                of the display.
                           </p>
                        </li>
                        <li>
                           <p>Choose <span><strong class="guimenuitem">Browse object</strong></span> to display
                                basic information about the selected object in a new Proximity Database Browser
                                window.
                           </p>
                        </li>
                        <li>
                           <p>Choose <span><strong class="guimenuitem">Browse object attributes</strong></span> to
                                display attribute details for the selected object in a new Proximity Database Browser
                                window.
                           </p>
                        </li>
                        <li>
                           <p>Choose <span><strong class="guimenuitem">Browse database from object</strong></span> to
                                graph the selected object and its immediate neighbors in the
                                graphical data browser.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <p>
                     
                  </p>
                  <p>Close the legend and graph windows when you are through
                     examining the graph.
                  </p>
               </li>
               <li>
                  <p>Click the object and link IDs in the <span class="guilabel">Items</span>
                     list to explore the individual items in this subgraph. For example,
                     click <span><strong class="guibutton">start_page (O): 398</strong></span> or enter
                     <strong class="userinput"><code>item:/objects/398</code></strong> in the location bar to see
                     the details of the object in this subgraph that matched the 
                     <em class="token">start_page</em> vertex from the
                     QGraph query.
                     Proximity displays the information for object&nbsp;398.
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_RC1_0_details.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     
                  </p>
               </li>
               <li>
                  <p>
                     Click <span><strong class="guibutton">attrs</strong></span> or enter
                     <strong class="userinput"><code>item:/objects/398!ATTRVALS</code></strong> to display the
                     attributes and values for object 398.  Because object-based attribute
                     lookup is computationally expensive in MonetDB, the main object page
                     does not show the object&#8217;s attribute values.
                     If necessary, scroll down to see the value of
                     the <span xmlns:exsl="http://exslt.org/common" class="token" style="font-family: sans-serif">pagetype</span> attribute to confirm that this
                     is a research project page.
                     
                  </p>
               </li>
               <li>
                  <p>Return to the 
                     <span class="token">research-clusters1</span> container page.
                     From the <span><strong class="guimenu">File</strong></span> menu, choose 
                     <span><strong class="guimenuitem">New Window</strong></span> to open a new
                     Proximity Database Browser window.
                     <a class="indexterm" name="d0e7589"></a>
                     Arrange the windows so you can see the contents of both windows.
                     
                  </p>
               </li>
               <li>
                  <p>Display the contents of 
                     subgraph&nbsp;<span class="token">0</span> in one
                     of the windows.
                     Display the contents of 
                     subgraph&nbsp;<span class="token">2</span> in the
                     other window.  Notice that 
                     subgraphs&nbsp;<span class="token">0</span> 
                     and&nbsp;<span class="token">2</span> have the same 
                     <em class="token">start_page</em> object.
                     
                  </p>
                  <div class="mediaobject" align="center">
                     <table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0">
                        <tr>
                           <td align="center" valign="bottom"><img src="images/GUI_RC1_0and2.png" align="middle" width="630"></td>
                        </tr>
                     </table>
                  </div>
                  <p>
                     
                  </p>
               </li>
               <li>
                  <p>Close the window for 
                     subgraph&nbsp;<span class="token">2</span>. In the
                     other window, click <span><strong class="guibutton">Back</strong></span> to return to the page for
                     subgraph&nbsp;<span class="token">research-clusters1</span>.
                  </p>
               </li>
               <li>
                  <p>Continue to explore the results of your query. When you are
                     finished, continue to the next section.
                  </p>
               </li>
            </ol>
         </div><a class="indexterm" name="d0e7635"></a><a class="indexterm" name="d0e7636"></a><a class="indexterm" name="d0e7637"></a><a class="indexterm" name="d0e7638"></a><p>
            The query created above matches
            individual objects and links in the database instead of groups of 
            objects and links.  To obtain results that
            group all the linked pages together for each research project page, we
            need to add 
            <a xmlns:exsl="http://exslt.org/common" href="go01.html#d18e555"><span class="glossterm">numeric annotations</span></a>
            to the query.  The next section describes how to use numeric
            annotations in a Proximity query.
         </p>
      </div>
      <div class="navfooter">
         <hr>
         <table width="100%" summary="Navigation footer">
            <tr>
               <td width="40%" align="left"><a accesskey="p" href="ch05s02.html">Prev</a>&nbsp;
               </td>
               <td width="20%" align="center"><a accesskey="u" href="ch05.html">Up</a></td>
               <td width="40%" align="right">&nbsp;<a accesskey="n" href="ch05s04.html">Next</a></td>
            </tr>
            <tr>
               <td width="40%" align="left" valign="top">A First Proximity Query&nbsp;</td>
               <td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
               <td width="40%" align="right" valign="top">&nbsp;Grouping Elements in a Query</td>
            </tr>
         </table>
      </div>
   </body>
</html>